import{j as D,k as S,r as f,o as z,c as l,b as e,n as g,v as I,p as y,F as m,e as b,g as c,t as n,a as k,d as N,m as V,f as o,w,q as P,R as q}from"./index-mrb-czRM.js";import{A as B}from"./ApiDoctorProfile-JojLMQMA.js";import{A as T}from"./ApiSpecialty-Dyyar_jC.js";const C={class:"search-bar-container"},F={class:"search-bar"},A={method:"GET"},$={class:"search-result-container row"},R={class:"p-0 col-md-3"},U={class:"mt-4 form-group specialization-container"},j={method:"get"},G={class:"form-check mb-2"},L={class:"form-check mb-2"},M=["id","value"],E=["for"],K={class:"ms-3 p-0 col-md-8 border-start"},H={class:"p-3"},J={class:"m-0 text-secondary"},O={class:"text-decoration-underline text-dark fw-bold"},Q={key:0},W={class:""},X={class:"doctor-search-item p-4 border-top d-flex justify-content-between"},Y={style:{cursor:"pointer"},class:"d-flex"},Z={style:{width:"120px",height:"120px"},class:"me-3 doctor-img rounded-circle"},tt=["src"],et={class:"me-3 doctor-search-info"},at={class:"mb-2"},st={class:"mb-1 d-flex flex-wrap"},lt={class:"specialization-item-capsule"},ot={class:"m-0"},it={class:"d-flex align-items-center"},nt={key:1,class:"m-3 text-secondary"},mt={__name:"index",setup(rt){const d=S(),v=V(),a=D({pageNumber:d.params.pageNumber||1,pageSize:d.params.pageSize||10,searchValue:d.params.searchValue||"",specialtyID:d.query.specialtyID||"",totalPages:0,totalRecords:0,statusFilter:!1}),p=f([]),_=f([]),r=async()=>{try{var u=await T.GetAllSpeID();_.value=u.data.data;var t=await B.GetAllByLimit(a);p.value=t.data.data,a.pageNumber=t.data.pageNumber,a.pageSize=t.data.pageSize,a.totalPages=t.data.totalPages,a.totalRecords=t.data.totalRecords,a.statusFilter&&(a.pageNumber>t.data.totalPages||t.data.totalRecords>0?(a.pageNumber=1,v.push({name:"Public_DanhSachBacSi",query:{pageNumber:1,pageSize:a.pageSize,searchValue:a.searchValue,specialtyID:a.specialtyID}})):v.push({name:"Public_DanhSachBacSi",query:{pageNumber:a.pageNumber,pageSize:a.pageSize,searchValue:a.searchValue,specialtyID:a.specialtyID}}),a.statusFilter=!a.statusFilter)}catch(h){console.log(h)}},x=(u,t)=>{a.pageNumber=u,a.pageSize=t,a.statusFilter=!0,r()};return z(()=>{r()}),(u,t)=>{const h=N("a-pagination");return o(),l(m,null,[e("div",C,[e("div",F,[e("form",A,[g(e("input",{onInput:t[0]||(t[0]=s=>r()),type:"text",name:"txtSearch",placeholder:"Tìm theo Bác sĩ ...","onUpdate:modelValue":t[1]||(t[1]=s=>a.searchValue=s)},null,544),[[I,a.searchValue]]),t[7]||(t[7]=e("button",{type:"submit"},[e("i",{class:"bx bx-search"})],-1))])])]),e("div",$,[e("div",R,[t[9]||(t[9]=e("label",{class:"form-label fw-bold"},"Chuyên khoa",-1)),e("div",U,[e("form",j,[e("div",G,[g(e("input",{onClick:t[2]||(t[2]=s=>r()),"onUpdate:modelValue":t[3]||(t[3]=s=>a.specialtyID=s),checked:"",type:"radio",class:"form-check-input radio-lg",name:"specialization",id:"specialization-all",value:"all"},null,512),[[y,a.specialtyID]]),t[8]||(t[8]=e("label",{class:"form-check-label",for:"specialization-all"}," Tất cả ",-1))]),(o(!0),l(m,null,b(_.value,s=>(o(),l("div",L,[g(e("input",{onClick:t[4]||(t[4]=i=>r()),type:"radio",class:"form-check-input radio-lg",name:"specialization",id:s.specialtyID,value:s.specialtyID,"onUpdate:modelValue":t[5]||(t[5]=i=>a.specialtyID=i)},null,8,M),[[y,a.specialtyID]]),e("label",{class:"form-check-label",for:s.specialtyID},n(s.title),9,E)]))),256))])])]),e("div",K,[e("div",H,[e("p",J,[t[10]||(t[10]=c(" Tìm thấy ")),e("span",O,n(a.totalRecords),1),t[11]||(t[11]=c(" kết quả. "))])]),p.value.length>0?(o(),l("div",Q,[e("div",W,[(o(!0),l(m,null,b(p.value,s=>(o(),l("div",X,[e("div",Y,[e("div",Z,[e("img",{src:s.imageString,alt:"doctorImg"},null,8,tt)]),e("div",et,[e("h5",at,[e("span",null,n(s.doctorTitle),1),t[12]||(t[12]=c(" - ")),e("span",null,n(s.fullName),1)]),e("div",st,[(o(!0),l(m,null,b(s.specialties,i=>(o(),l("label",lt,n(i.title),1))),256))]),e("p",ot,n(s.address),1)])]),e("div",it,[k(P(q),{class:"button-hover",to:{name:"User_Doctor_Detail",params:{doctorID:s.doctorProfileID}}},{default:w(()=>t[13]||(t[13]=[c(" Đặt khám "),e("i",{class:"bx bx-right-arrow-alt"},null,-1)])),_:2},1032,["to"])])]))),256))]),k(h,{onChange:x,modelValue:a.pageNumber,"onUpdate:modelValue":t[6]||(t[6]=s=>a.pageNumber=s),total:a.totalRecords,pageSize:a.pageSize,"show-total":(s,i)=>`${i[0]}-${i[1]} of ${s} items`,"show-quick-jumper":"","show-page-changer":"",class:"crud-layout-pagination"},null,8,["modelValue","total","pageSize","show-total"])])):(o(),l("div",nt,t[14]||(t[14]=[e("h2",null,[e("i",{class:"bx bx-info-circle"}),c(" Không có kết quả tìm kiếm với từ khoá vừa sử dụng. ")],-1),e("p",null,"Bạn có thể kiểm tra và thử lại với một số gợi ý sau:",-1),e("ul",null,[e("li",null,"Kiểm tra xem từ đó có đúng chính tả không."),e("li",null," Hãy thử giảm số lượng từ trong cụm từ tìm kiếm của bạn hoặc thử tìm kiếm lại bằng cụm từ tổng quát hơn. "),e("li",null," Nếu cụm từ tìm kiếm của bạn có nhiều hơn một từ, hãy kiểm tra khoảng cách. "),e("li",null,"Thay đổi tuỳ chọn tìm kiếm hoặc cụm từ khác phổ biến hơn.")],-1)])))])])],64)}}};export{mt as default};
