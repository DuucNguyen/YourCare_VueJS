import{_ as I,u as N,r as u,y as e,o as L,c,a as l,b as o,w as d,d as p,n as T,t as r,q as D,T as U,F as C,e as A,f as i,G as V}from"./index-BYc9s0ur.js";import{D as E}from"./DoctorSideBar-5FPzQg7l.js";import{A as B}from"./ApiAppointment-D4q4ZZK-.js";import{A as F}from"./ApiDoctorProfile-BsW9fqP9.js";/* empty css                                                                      */const P={class:"doctor_dashboard_body"},R={class:"doctor_dashboard_section"},j={class:"doctor_dashboard_body"},q={class:"col-md-8 doctor_calendar_container"},$={class:"events"},z={key:0,class:"notes-month"},J={class:"col-md-4 doctor_calendar_detail"},K={class:"doctor_dashboard_title"},O={class:"calendar_appointment_container"},Q={class:"calendar_appointment_item"},W={__name:"calendar",setup(X){const H=N();var v=u([]),m=u({});const s=u(e()),f=u(e()),_=u([]),Y=t=>v.value.filter(a=>e(a.date).isSame(e(t),"day")&&a.appointmentCount).map(a=>({type:"success",content:`${a.appointmentCount.toString().padStart(2,"0")} lịch khám`})),w=t=>{if(t.month()===8)return 1394},k=async()=>{var t=await H.getUserInfo(),a=await F.GetByUserID(t.id);a.data.isSucceeded&&(m.value=a.data.data)},S=async()=>{if(m.value){var t=await B.CountAppointmentInMonthByDate(m.value,s.value);t.data.isSucceeded&&(v.value=t.data.data,f.value=s.value)}},M=async()=>{(!e(s.value).isSame(e(f.value),"month")||!e(s.value).isSame(e(f.value),"year"))&&await S();var t=v.value.find(a=>a.appointmentCount>0&&e(s.value).isSame(e(a.date),"day"));t&&g(),console.log(_)},g=async()=>{var t=await B.GetDoctorAppointmentByDate(m.value,e(s.value).format("MM/DD/YYYY"));t.data.isSucceeded&&(_.value=t.data.data)};return L(async()=>{await k(),await S(),await g()}),(t,a)=>{const b=p("a-badge"),x=p("a-calendar"),h=p("a-col"),G=p("a-row");return i(),c("div",P,[l(E,{"active-item":"calendar"}),o("div",R,[o("div",j,[o("div",q,[l(x,{value:s.value,"onUpdate:value":a[0]||(a[0]=n=>s.value=n),onChange:M},{dateCellRender:d(({current:n})=>[o("ul",$,[(i(!0),c(C,null,A(Y(n),y=>(i(),c("li",{key:y.content},[l(b,{status:y.type,text:y.content},null,8,["status","text"])]))),128))])]),monthCellRender:d(({current:n})=>[w(n)?(i(),c("div",z,[o("section",null,r(w(n)),1),a[1]||(a[1]=o("span",null,"Backlog number",-1))])):V("",!0)]),_:1},8,["value"])]),o("div",J,[o("div",K,[o("h3",null,"Lịch khám: "+r(D(e)(s.value).format("DD/MM/YYYY")),1)]),T(o("div",O,[(i(!0),c(C,null,A(_.value,n=>(i(),c("div",Q,[l(G,null,{default:d(()=>[l(h,{span:1,class:"d-flex align-items-center"},{default:d(()=>[l(b,{status:"success"})]),_:1}),l(h,{span:6,class:"calendar_appointment_timeslot"},{default:d(()=>[o("span",null,r(D(e)(n.timetableStartTime,"HH:mm:ss").format("HH:mm"))+" - "+r(D(e)(n.timetableEndTime,"HH:mm:ss").format("HH:mm")),1)]),_:2},1024),l(h,{span:16,class:"ms-2 d-flex align-items-center"},{default:d(()=>[o("span",null,r(n.doctorName),1),o("span",null,r(n.patientName),1)]),_:2},1024)]),_:2},1024)]))),256))],512),[[U,_.value.length>0]])])])])])}}},na=I(W,[["__scopeId","data-v-7ab81fe7"]]);export{na as default};
