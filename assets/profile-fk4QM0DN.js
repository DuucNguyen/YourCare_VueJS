import{U as T}from"./UserSideBar-DUzbdG1_.js";import{_ as N,u as C,r as w,j as M,o as S,c as V,a as e,b as n,w as a,d,m as D,f as E,t as i,q as B,y as F,g as h,M as U,C as v,E as j}from"./index-ruO88dao.js";const Y={class:"d-flex"},q={style:{},class:"profile_container"},I={class:"profile_body_container"},O={class:"profile_body_container"},A={__name:"profile",setup(H){D();const f=C(),o=w({}),r=M({currentPassword:"",newPassword:""}),m=w(),y={currentPassword:[{required:"true",message:"Vui lòng điền đầy đủ thông tin",trigger:"change"},{min:6,message:"Vui lòng nhập ít nhất 6 ký tự",trigger:"change"}],newPassword:[{required:"true",message:"Vui lòng điền đầy đủ thông tin",trigger:"change"},{min:6,message:"Vui lòng nhập ít nhất 6 ký tự",trigger:"change"},{validator:(u,s,t)=>{/[A-Z]/.test(s)?/[!@#$%^&*(),.?":{}|<>]/.test(s)?t():t(new Error("Password must include at least one special character.")):t(new Error("Password must include at least one upper case."))},trigger:"change"}]};S(async()=>{o.value=await f.getUserInfo()});const P=()=>{m.value.validate().then(async()=>{b()}).catch(u=>{console.log(u)})},b=()=>{U.confirm({title:"Xác nhận thay đổi mật khẩu",icon:e(j),content:"Bạn có chắc chắn thay đổi mật khẩu không ?",okText:"Đồng ý",cancelText:"Hủy",async onOk(){var u=new FormData;u.append("userID",o.value.id),u.append("currentPassword",r.currentPassword),u.append("newPassword",r.newPassword);var s=await f.changePassword(u);if(s.data.isSucceeded)return v.success("Thay đổi mật khẩu thành công."),new Promise(t=>{setTimeout(()=>{t("Timeout done.")},2e3)}).then(()=>{f.logOut()});v.error("Lỗi, vui lòng thử lại sau.")},onCancel(){}})};return(u,s)=>{const t=d("a-col"),l=d("a-row"),_=d("a-divider"),g=d("a-input-password"),c=d("a-form-item"),k=d("a-button"),x=d("a-form");return E(),V("div",Y,[e(T,{page:"profile"}),n("div",q,[e(l,{class:"profile_head"},{default:a(()=>[e(t,{span:24},{default:a(()=>s[3]||(s[3]=[n("span",{class:"profile_head_title"}," Tài khoản ",-1)])),_:1})]),_:1}),e(_,{class:"m-0"}),e(l,{class:"profile_body"},{default:a(()=>[e(t,{span:12},{default:a(()=>[e(l,{class:"profile_body_title"},{default:a(()=>[e(t,{span:24},{default:a(()=>s[4]||(s[4]=[n("span",null,"Thông tin tài khoản",-1)])),_:1})]),_:1}),n("div",I,[e(l,{class:"profile_body_item"},{default:a(()=>[e(t,{span:12},{default:a(()=>s[5]||(s[5]=[n("span",null,"Họ và tên",-1)])),_:1}),e(t,{span:12},{default:a(()=>[n("span",null,i(o.value.fullName),1)]),_:1})]),_:1}),e(l,{class:"profile_body_item"},{default:a(()=>[e(t,{span:12},{default:a(()=>s[6]||(s[6]=[n("span",null," Email ",-1)])),_:1}),e(t,{span:12},{default:a(()=>[n("span",null,i(o.value.email),1)]),_:1})]),_:1}),e(l,{class:"profile_body_item"},{default:a(()=>[e(t,{span:12},{default:a(()=>s[7]||(s[7]=[n("span",null," SĐT ",-1)])),_:1}),e(t,{span:12},{default:a(()=>[n("span",null,i(o.value.phoneNumber?o.value.phoneNumber:"chưa cập nhật"),1)]),_:1})]),_:1}),e(l,{class:"profile_body_item"},{default:a(()=>[e(t,{span:12},{default:a(()=>s[8]||(s[8]=[n("span",null," Giới tính ",-1)])),_:1}),e(t,{span:12},{default:a(()=>[n("span",null,i(o.value.gender==!0?"Nam":"Nữ"),1)]),_:1})]),_:1}),e(l,{class:"profile_body_item"},{default:a(()=>[e(t,{span:12},{default:a(()=>s[9]||(s[9]=[n("span",null," Địa chỉ ",-1)])),_:1}),e(t,{span:12},{default:a(()=>[n("span",null,i(o.value.address?o.value.address:"chưa cập nhật"),1)]),_:1})]),_:1}),e(l,{class:"profile_body_item"},{default:a(()=>[e(t,{span:12},{default:a(()=>s[10]||(s[10]=[n("span",null," Ngày sinh ",-1)])),_:1}),e(t,{span:12},{default:a(()=>[n("span",null,i(o.value.dob?B(F)(o.value.dob).format("DD/MM/YYYY"):"chưa cập nhật"),1)]),_:1})]),_:1})])]),_:1}),e(t,{span:2,class:"d-flex justify-content-center"},{default:a(()=>[e(_,{type:"vertical",style:{height:"100%"}})]),_:1}),e(t,{span:10},{default:a(()=>[e(l,{class:"profile_body_title"},{default:a(()=>[e(t,{span:24},{default:a(()=>s[11]||(s[11]=[n("span",null,"Đổi mật khẩu",-1)])),_:1})]),_:1}),n("div",O,[e(x,{layout:"vertical",ref_key:"changePasswordForm",ref:m,model:r,rules:y},{default:a(()=>[e(l,null,{default:a(()=>[e(t,{span:24},{default:a(()=>[e(c,{label:"Mật khẩu hiện tại",name:"currentPassword"},{default:a(()=>[e(g,{value:r.currentPassword,"onUpdate:value":s[0]||(s[0]=p=>r.currentPassword=p)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(l,null,{default:a(()=>[e(t,{span:24},{default:a(()=>[e(c,{label:"Mật khẩu mới",name:"newPassword"},{default:a(()=>[e(g,{value:r.newPassword,"onUpdate:value":s[1]||(s[1]=p=>r.newPassword=p)},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(c,{class:"d-flex justify-content-end"},{default:a(()=>[e(k,{disabled:!r.currentPassword&&!r.newPassword,type:"primary",onClick:s[2]||(s[2]=p=>P())},{default:a(()=>s[12]||(s[12]=[h(" Thay đổi ")])),_:1},8,["disabled"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1}),e(_,{class:"m-0"}),e(l,{class:"profile_footer"},{default:a(()=>[e(t,{span:24},{default:a(()=>s[13]||(s[13]=[n("span",null,[h("Tổng đài hỗ trợ và chăm sóc khách hàng: "),n("span",{class:"text-primary"}," 0865493798 ")],-1)])),_:1})]),_:1})])])}}},G=N(A,[["__scopeId","data-v-d7d13378"]]);export{G as default};
