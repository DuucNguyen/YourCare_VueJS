import{_ as I,u as V,r as f,j as B,k as M,o as S,c as C,b as i,a as t,d as a,w as s,f as E,g as T,C as u}from"./index-BYc9s0ur.js";const X={class:"container mt-5"},N={class:"step-container"},R={__name:"resetPassword",setup(U){const c=M(),h=V(),w=[{title:"Gửi email"},{title:"Xác nhận"},{title:"Tạo mật khẩu mới"}],g=f(),o=B({password:"",newPassword:"",code:c.params.code??"",userId:c.params.userId??""}),k=f({password:[{required:!0,message:"Vui lòng nhập mật khẩu mới",trigger:"change"},{validator:(l,e,r)=>{/[A-Z]/.test(e)?/[!@#$%^&*(),.?":{}|<>]/.test(e)?r():r(new Error("Mật khẩu phải chứa ít nhất một kí tự đặc biệt.")):r(new Error("Mật khẩu phải chứa ít nhất một chữ cái in hoa."))},trigger:"change"}],newPassword:[{required:!0,message:"Vui lòng xác nhận mật khẩu mới",trigger:"change"},{validator:(l,e,r)=>{e!==o.password?r(new Error("Mật khẩu mới không khớp.")):r()},trigger:"change"}]});S(()=>{});const v=async()=>{if(!o.userId){u.error("Lỗi. vui lòng gửi lại yêu cầu đổi mật khẩu.");return}if(!o.code){u.error("Lỗi. vui lòng gửi lại yêu cầu đổi mật khẩu.");return}var l={userId:o.userId,code:o.code,password:o.password},e=await h.resetPassword(l);e.data.isSucceeded?u.success(e.data.message):u.error(e.data.message)};return(l,e)=>{const r=a("a-steps"),d=a("a-col"),m=a("a-row"),x=a("a-divider"),_=a("a-input"),p=a("a-form-item"),y=a("a-button"),P=a("a-popconfirm"),b=a("a-form");return E(),C("div",X,[i("div",N,[t(r,{current:2,items:w})]),t(m,{class:"form-container"},{default:s(()=>[t(m,{class:"w-100"},{default:s(()=>[t(d,{span:24,class:"form-title"},{default:s(()=>e[3]||(e[3]=[i("span",null,"Tạo mật khẩu mới",-1)])),_:1})]),_:1}),t(x,{class:"m-2"}),t(d,{span:24},{default:s(()=>[t(b,{"label-col":{span:8},"wrapper-col":{span:16},ref_key:"formRef",ref:g,model:o,"onUpdate:model":e[2]||(e[2]=n=>o=n),rules:k.value},{default:s(()=>[t(p,{name:"password",label:"Mật khẩu"},{default:s(()=>[t(_,{value:o.password,"onUpdate:value":e[0]||(e[0]=n=>o.password=n)},null,8,["value"])]),_:1}),t(p,{name:"newPassword",label:"Xác nhận mật khẩu"},{default:s(()=>[t(_,{value:o.newPassword,"onUpdate:value":e[1]||(e[1]=n=>o.newPassword=n)},null,8,["value"])]),_:1}),t(p,{class:"w-100"},{default:s(()=>[t(m,{class:"w-100"},{default:s(()=>[t(d,{span:24,class:"d-flex justify-content-end"},{default:s(()=>[t(P,{placement:"bottom","ok-text":"Xác nhận",okButtonProps:{type:"primary",style:{height:"30px",width:"150px"}},cancelButtonProps:{style:{height:"30px",width:"80px"}},"cancel-text":"Hủy",onConfirm:v},{title:s(()=>e[4]||(e[4]=[i("span",{class:"fs-6 text-primary"},"Xác nhận đặt lại mật khẩu",-1),i("br",null,null,-1),i("span",{class:"text-danger"},"Vui lòng kiểm tra lại thông tin phía trên.",-1)])),default:s(()=>[t(y,{type:"primary",style:{height:"35px","font-weight":"500"},class:"fs-6"},{default:s(()=>e[5]||(e[5]=[T(" Tạo mật khẩu mới ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})])}}},q=I(R,[["__scopeId","data-v-2b18c307"]]);export{q as default};
