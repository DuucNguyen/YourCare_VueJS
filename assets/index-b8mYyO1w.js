import{A as y}from"./ApiAppointment-ymI48ypZ.js";import{_ as I,u as M,r as x,o as G,c,a as t,b as n,w as a,d as f,f as _,F as z,e as B,O as E,t as o,q as p,y as r,G as k,h as O,g as v,M as j,C as A,E as L}from"./index-q7kJcf_g.js";import{U}from"./UserSideBar-CRQ3WLz7.js";import{A as h}from"./AppointmentStatus-C_9gBi1V.js";const V={class:"d-flex"},q={class:"profile_container"},W={class:"appointment_search"},F=["onClick"],P={style:{"font-weight":"500","font-size":"17px"}},X={style:{color:"#1975dc","font-weight":"500"}},$={class:"text-secondary ms-3",style:{"font-size":"13px"}},J={style:{"font-weight":"500","font-size":"20px",color:"#22c55e"}},K={key:0},Q={class:"fs-5 d-flex align-items-center"},R=["src"],Z={class:"ms-2",style:{"font-weight":"500","font-size":"18px"}},tt={style:{color:"#1975dc","font-weight":"500"}},at={__name:"index",setup(et){const D=M(),g=x([]),s=x({}),m=x({}),N=async()=>{var d=await D.getUserInfo(),e=await y.GetAllByUserID(d.id);e.data.isSucceeded&&(g.value=e.data.data)},C=()=>{},b=async d=>{m.value=d;var e=await y.GetDetailById(m.value.id);e.data.isSucceeded&&(s.value=e.data.data)},w=()=>{j.confirm({title:"Xác nhận hủy lịch khám.",icon:t(L),content:"Hành động này không thể hoàn tác, Vui lòng chắc chắn trước khi hủy lịch khám.",okText:"Xác nhận",cancelText:"Hủy",async onOk(){var d=[{op:"replace",path:"/status",value:h.CANCELLED}],e=await y.UpdateAppointmentStatus(s.value.id,d);e.data.isSucceeded?(A.success("Hủy lịch khám thành công"),await b(s.value)):A.error("Lỗi, vui lòng thử lại")},onCancel(){}})};return G(async()=>{try{await N()}catch(d){console.log(d)}}),(d,e)=>{const l=f("a-col"),i=f("a-row"),T=f("a-divider"),H=f("a-input"),S=f("a-button"),Y=f("a-qrcode");return _(),c("div",V,[t(U,{page:"history"}),n("div",q,[t(i,{class:"profile_head"},{default:a(()=>[t(l,{span:24},{default:a(()=>e[1]||(e[1]=[n("span",{class:"profile_head_title"}," Lịch khám ",-1)])),_:1})]),_:1}),t(T,{class:"m-0"}),t(i,{class:"profile_body"},{default:a(()=>[t(l,{span:8,class:"appointment_container"},{default:a(()=>[n("div",W,[t(H,{onInput:C,style:{height:"40px"},placeholder:"Mã phiếu khám, tên bệnh nhân,..."})]),n("div",null,[(_(!0),c(z,null,B(g.value,u=>(_(),c("div",{class:E("appointment_item "+(m.value.id==u.id?"appointment_item_chosen":"")),onClick:nt=>b(u)},[t(i,null,{default:a(()=>[t(l,{span:24},{default:a(()=>[n("span",P,o(u.doctorName),1)]),_:2},1024)]),_:2},1024),t(i,null,{default:a(()=>[t(l,{span:20},{default:a(()=>[n("span",null,o(p(r)(u.timetableStartTime,"HH:mm:ss").format("HH:mm"))+" - ",1),n("span",X,o(p(r)(u.timetableDate).format("DD-MM-YYYY")),1),e[2]||(e[2]=n("br",null,null,-1)),n("span",null,o(u.patientName),1),e[3]||(e[3]=n("br",null,null,-1)),n("span",$,o(u.status),1)]),_:2},1024),t(l,{span:4,class:"text-center"},{default:a(()=>[e[4]||(e[4]=n("span",{style:{"font-size":"12px"}},"STT",-1)),e[5]||(e[5]=n("br",null,null,-1)),n("span",J,o(u.timeTableOrder),1)]),_:2},1024)]),_:2},1024)],10,F))),256))])]),_:1}),t(l,{span:15,class:"appointment_detail_container"},{default:a(()=>[m.value.id?(_(),c("div",K,[t(i,null,{default:a(()=>[s.value.status===p(h).WAITING?(_(),O(l,{key:0,span:5,class:"text-secondary d-flex justify-content-start"},{default:a(()=>[t(S,{type:"primary",danger:"",onClick:e[0]||(e[0]=u=>w(s.value))},{default:a(()=>e[6]||(e[6]=[v("Hủy lịch khám")])),_:1})]),_:1})):k("",!0),t(l,{span:s.value.status===p(h).WAITING?9:12,class:"ms-2 text-start",style:{color:"#22c55e","font-weight":"500","font-size":"20px"}},{default:a(()=>[v(" STT: "+o(m.value.timeTableOrder),1)]),_:1},8,["span"]),t(l,{span:s.value.status===p(h).WAITING?9:11,class:"text-secondary d-flex justify-content-end"},{default:a(()=>[n("span",Q,[e[7]||(e[7]=n("i",{class:"bx bx-error-alt fs-4 me-1"},null,-1)),v(" "+o(m.value.status),1)])]),_:1},8,["span"])]),_:1}),t(i,{class:"mt-3"},{default:a(()=>[t(l,{span:12},{default:a(()=>[n("img",{style:{width:"75px",height:"100%","object-fit":"contain"},src:s.value.doctorImage},null,8,R),n("span",Z,o(s.value.doctorName),1)]),_:1}),t(l,{span:12,class:"d-flex justify-content-end"},{default:a(()=>[t(Y,{size:100,value:s.value.appointmentCode+" / "+s.value.doctorName+" / "+s.value.patientName+" / "+p(r)(s.value.timetableDate).format("DD/MM/YYYY")+" / STT: "+s.value.timeTableOrder+" / "+s.value.timetableStartTime+"-"+s.value.timetableEndTime},null,8,["value"])]),_:1})]),_:1}),t(i,null,{default:a(()=>[t(l,{span:24,class:"appointment_detail_title"},{default:a(()=>e[8]||(e[8]=[n("span",null," Thông tin lịch khám ",-1)])),_:1})]),_:1}),n("div",null,[t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[9]||(e[9]=[n("span",null,"Mã phiếu khám",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",tt,o(s.value.appointmentCode),1)]),_:1})]),_:1}),t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[10]||(e[10]=[n("span",null," Ngày khám ",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(p(r)(s.value.timetableDate).format("DD/MM/YYYY")),1)]),_:1})]),_:1}),t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[11]||(e[11]=[n("span",null,"Ca khám",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(p(r)(s.value.timetableStartTime,"HH:mm:ss").format("HH:mm"))+" - "+o(p(r)(s.value.timetableEndTime,"HH:mm:ss").format("HH:mm")),1)]),_:1})]),_:1})]),t(i,null,{default:a(()=>[t(l,{span:24,class:"appointment_detail_title"},{default:a(()=>e[12]||(e[12]=[n("span",null," Thông tin bệnh nhân ",-1)])),_:1})]),_:1}),n("div",null,[t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[13]||(e[13]=[n("span",null," Số thứ tự trong ca ",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(s.value.timeTableOrder),1)]),_:1})]),_:1}),t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[14]||(e[14]=[n("span",null," Họ và tên ",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(s.value.patientName),1)]),_:1})]),_:1}),t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[15]||(e[15]=[n("span",null," Ngày sinh ",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(s.value.patientDob!=null?p(r)(s.value.patientDob).format("DD/MM/YYYY"):"Chưa cập nhật"),1)]),_:1})]),_:1}),t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[16]||(e[16]=[n("span",null," Số điện thoại ",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(s.value.patientPhoneNumber!=null?s.value.patientPhoneNumber:"Chưa cập nhật"),1)]),_:1})]),_:1}),t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[17]||(e[17]=[n("span",null," Giới tính ",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(s.value.patientGender==!0?"Nam":"Nữ"),1)]),_:1})]),_:1}),t(i,{class:"appointment_detail_item"},{default:a(()=>[t(l,{span:12},{default:a(()=>e[18]||(e[18]=[n("span",null," Địa chỉ ",-1)])),_:1}),t(l,{span:12},{default:a(()=>[n("span",null,o(s.value.patientAddress!=null&&s.value.patientAddress!=""?s.value.patientAddress:"Chưa cập nhật"),1)]),_:1})]),_:1})])])):k("",!0)]),_:1})]),_:1}),t(T,{class:"m-0"}),t(i,{class:"profile_footer"},{default:a(()=>[t(l,{span:24},{default:a(()=>e[19]||(e[19]=[n("span",null,[v("Tổng đài hỗ trợ và chăm sóc khách hàng: "),n("span",{class:"text-primary"},"0865493798")],-1)])),_:1})]),_:1})])])}}},pt=I(at,[["__scopeId","data-v-4cd76ff4"]]);export{pt as default};
