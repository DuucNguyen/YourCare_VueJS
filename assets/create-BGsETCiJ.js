import{j as C,r as y,o as z,k as H,c as x,b as a,a as r,n as c,g as p,v as b,p as N,w as i,d as m,A as J,m as K,f as v,q as Q,F as W,e as X,h as Z,t as ee,M as te,E as ae,s as oe}from"./index-BYc9s0ur.js";import{A as se}from"./ApiDoctorProfile-BsW9fqP9.js";import{A as le}from"./ApiSpecialty-CtuwqiUM.js";import{P as re}from"./PlusOutlined-ect-pk6l.js";const ne={class:"d-flex justify-content-between"},ie={class:"col-md-5 basic-information-container"},de={class:"mb-3 form-items"},ue={class:"mb-3 form-items"},me={class:"mb-3 form-items"},pe={class:"mb-3 form-items"},ce={class:"mb-3 form-items d-flex"},fe={key:0,class:"d-flex"},ge={key:1,class:"d-flex"},ye={class:"mb-3 form-items"},be={class:"d-flex justify-content-between"},ve=["src"],Ie={__name:"create",setup(xe){const A=H();K();const l=C({applicationUserID:"",applicationUserImage:[],doctorTitle:"",doctorDescription:"",startCareerYear:"",specialtyIDs:[]}),T={applicationImage:[{required:"true",message:"Please upload at least one image.",type:"array"}],doctorTitle:[{required:"true",message:"Please input doctor title."}],doctorDescription:[{required:"true",message:"Please input doctor description."}],startCareerYear:[{required:"true",message:"Please input year experience."},{type:"number",message:"Input must be a year"},{pattern:k(),message:"Input must be from 1980 - now"}],specialtyIDs:[{required:"true",type:"array",message:"Please choose at least one specialty."}],applicationUserImage:[{required:!0,message:"Please upload at least one image."}]};function k(){const t=new Date().getFullYear();return new RegExp(`^(198[0-9]|199[0-9]|20[0-${Math.floor(t/100)%10}][0-${t%10}])$`)}const D=y([]),_=y(),P={span:24},S={span:24},o=C({id:"",fullName:"",email:"",dob:"",address:"",phoneNumber:"",gender:!0,imageString:""}),Y=async()=>{var t=await J.GetByID(o.id);t.data.isSucceeded&&(o.fullName=t.data.data.fullName,o.email=t.data.data.email,o.dob=t.data.data.dob,o.address=t.data.data.address,o.phoneNumber=t.data.data.phoneNumber,o.gender=t.data.data.gender,o.imageString=t.data.data.imageString)},F=async()=>{var t=await le.GetAllSpeID();D.value=t.data.data};z(async()=>{o.id=A.params.id,o.id&&await Y(),await F(),l.applicationUserImage.push({uid:"-1",name:"applicationUserImage",status:"done",thumbUrl:o.imageString})});const V=()=>{te.confirm({title:"Are you sure create this specialty?",icon:r(ae),content:"Are you sure to perform this action.",okText:"Yes",cancelText:"No",async onOk(){var t=new FormData;t.append("userID",o.id),t.append("userImage",h(l.applicationUserImage[0].thumbUrl,"applicationUserImage")),t.append("doctorTitle",l.doctorTitle),t.append("doctorDescription",l.doctorDescription),t.append("startCareerYear",l.startCareerYear),l.specialtyIDs.forEach((n,f)=>{t.append(`specialtyIDs[${f}]`,n)});var e=await se.Create(t),d=e.data.isSucceeded?"success":"error",u=e.data.message;B(d,"Create status",u)},onCancel(){console.log("Cancel update")}})},B=(t,e,d)=>{oe[t]({message:e,description:d})},R=()=>{_.value.validate().then(()=>{V()}).catch(t=>{console.log("error: "+t)})},w=y(!1),I=y(""),U=y("");function q(t){return new Promise((e,d)=>{const u=new FileReader;u.readAsDataURL(t),u.onload=()=>e(u.result),u.onerror=n=>d(n)})}const M=async t=>{!t.thumbUrl&&!t.preview&&(t.preview=await q(t.originFileObj)),I.value=t.thumbUrl||t.preview,w.value=!0,U.value=t.name||t.thumbUrl.substring(t.thumbUrl.lastIndexOf("/")+1)},E=()=>{w.value=!1,U.value=""};function h(t,e="file.png"){const d=atob(t.split(",")[1]),u=t.match(/data:(.*?);base64/)[1],n=new ArrayBuffer(d.length),f=new Uint8Array(n);for(let g=0;g<d.length;g++)f[g]=d.charCodeAt(g);return new File([f],e,{type:u})}return(t,e)=>{const d=m("a-upload"),u=m("a-modal"),n=m("a-form-item"),f=m("a-select-option"),g=m("a-select"),L=m("a-input"),O=m("a-input-number"),j=m("a-textarea"),$=m("a-button"),G=m("a-form");return v(),x("div",ne,[a("div",ie,[e[20]||(e[20]=a("h4",{class:"text-center",style:{color:"#1975dc"}},"Basic information",-1)),a("div",de,[e[12]||(e[12]=a("label",{class:"form-label"},[p("Full Name"),a("span",{class:"text-danger"},"*")],-1)),c(a("input",{readonly:"","onUpdate:modelValue":e[0]||(e[0]=s=>o.fullName=s),class:"form-control",type:"text"},null,512),[[b,o.fullName]])]),a("div",ue,[e[13]||(e[13]=a("label",{class:"form-label"},[p("Email"),a("span",{class:"text-danger"},"*")],-1)),c(a("input",{readonly:"","onUpdate:modelValue":e[1]||(e[1]=s=>o.email=s),class:"form-control",type:"text"},null,512),[[b,o.email]])]),a("div",me,[e[14]||(e[14]=a("label",{class:"form-label"},[p("Address"),a("span",{class:"text-danger"},"*")],-1)),c(a("input",{readonly:"","onUpdate:modelValue":e[2]||(e[2]=s=>o.address=s),class:"form-control",type:"text"},null,512),[[b,o.address]])]),a("div",pe,[e[15]||(e[15]=a("label",{class:"form-label"},[p("PhoneNumber"),a("span",{class:"text-danger"},"*")],-1)),c(a("input",{readonly:"","onUpdate:modelValue":e[3]||(e[3]=s=>o.phoneNumber=s),class:"form-control",type:"text"},null,512),[[b,o.phoneNumber]])]),a("div",ce,[e[18]||(e[18]=a("label",{class:"form-label me-5"},[p("Gender"),a("span",{class:"text-danger"},"*")],-1)),a("div",null,[o.gender===!0?(v(),x("div",fe,[c(a("input",{readonly:"","onUpdate:modelValue":e[4]||(e[4]=s=>o.gender=s),id:"male",class:"form-check",type:"radio",value:"true"},null,512),[[N,o.gender]]),e[16]||(e[16]=a("label",{class:"ms-1",for:"male"},"Male",-1))])):(v(),x("div",ge,[c(a("input",{readonly:"","onUpdate:modelValue":e[5]||(e[5]=s=>o.gender=s),id:"female",class:"form-check",type:"radio",value:"false"},null,512),[[N,o.gender]]),e[17]||(e[17]=a("label",{class:"ms-1",for:"female"},"Female",-1))]))])]),a("div",ye,[e[19]||(e[19]=a("label",{class:"form-label"},[p("Date of birth"),a("span",{class:"text-danger"},"*")],-1)),c(a("input",{readonly:"","onUpdate:modelValue":e[6]||(e[6]=s=>o.dob=s),class:"form-control",type:"date"},null,512),[[b,o.dob]])])]),r(G,{class:"col-md-6 doctor-information-container",ref_key:"formRef",ref:_,model:l,rules:T,"label-col":P,"wrapper-col":S},{default:i(()=>[e[23]||(e[23]=a("h4",{class:"text-center",style:{color:"#22c55e"}},"Doctor information",-1)),a("div",be,[r(n,{class:"col-md-5",label:"Image",name:"applicationUserImage"},{default:i(()=>[r(d,{fileList:l.applicationUserImage,"onUpdate:fileList":e[7]||(e[7]=s=>l.applicationUserImage=s),action:"","list-type":"picture-card","max-count":1,onPreview:M},{default:i(()=>[a("div",null,[r(Q(re)),e[21]||(e[21]=a("div",{style:{"margin-top":"8px"}},"Upload",-1))])]),_:1},8,["fileList"]),r(u,{open:w.value,title:U.value,footer:null,onCancel:E},{default:i(()=>[a("img",{alt:"example",style:{width:"100%"},src:I.value},null,8,ve)]),_:1},8,["open","title"])]),_:1}),r(n,{class:"col-md-7",label:"Specialties",name:"specialtyIDs"},{default:i(()=>[r(g,{mode:"multiple",value:l.specialtyIDs,"onUpdate:value":e[8]||(e[8]=s=>l.specialtyIDs=s)},{default:i(()=>[(v(!0),x(W,null,X(D.value,s=>(v(),Z(f,{key:s.specialtyID,value:s.specialtyID},{default:i(()=>[p(ee(s.title),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})]),r(n,{label:"Doctor title",name:"doctorTitle"},{default:i(()=>[r(L,{value:l.doctorTitle,"onUpdate:value":e[9]||(e[9]=s=>l.doctorTitle=s)},null,8,["value"])]),_:1}),r(n,{label:"Start Career Year",name:"startCareerYear"},{default:i(()=>[r(O,{style:{width:"100%"},value:l.startCareerYear,"onUpdate:value":e[10]||(e[10]=s=>l.startCareerYear=s)},null,8,["value"])]),_:1}),r(n,{label:"Doctor description",name:"doctorDescription"},{default:i(()=>[r(j,{value:l.doctorDescription,"onUpdate:value":e[11]||(e[11]=s=>l.doctorDescription=s)},null,8,["value"])]),_:1}),r(n,{class:"text-center"},{default:i(()=>[r($,{onClick:R,style:{width:"100%"},type:"primary"},{default:i(()=>e[22]||(e[22]=[p("Create")])),_:1})]),_:1})]),_:1},8,["model"])])}}};export{Ie as default};
